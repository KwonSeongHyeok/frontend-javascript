<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" /> 
        <title>휴대폰번호 유효성 검사</title>
        <style>
            .check{
                color: green;
            }
            .error{
                color: red;
            }
        </style>
    </head>
    <body>
        <h2>회원가입</h2>
        <form action="#" name="signupForm">
            <h3>휴대폰번호 : </h3>
            <input type="text" class="signup-input" id="inputPhone" name="user_Phone">
            <br>
            <span class="input-result">핸드폰 번호(000-0000-0000)</span>
        </form>

        <script>
            /* 유효성 여부를 체크해두는 객체 생성 */
            const checkList = {
                "inputPhone" : false
            };
            const inputPhone = document.querySelector("#inputPhone")

            inputPhone.addEventListener("input", e => {
                //          e.(input).target = 이벤트가 발생한 태그(버튼, 입력 필드 등)를 가리킴
                //                     value = 이벤트가 발생한 태그의 값을 가져오기.
                const value = e.target.value;
                //      sibling(형제 자매) = brother sister
                //            <input>       <br>                <span>
                const span = e.target.nextElementSibling.nextElementSibling;

                // 만약에 입력이 아무것도 안되어있으면 입력 x
                if(value.trim().length == 0) {
                    span.textContent = "핸드폰 번호(000-0000-0000)";
                    span.classList.remove("check","error");
                    e.target.value = "";
                    checkList["inputPhone"] = false;
                    return;
                }

                
                const phoneRegex = /^\d{3}-\d{3,4}-\d{4}$/;

                if(phoneRegex.test(value)){
                    span.textContent = "유효한 비밀번호입니다.";
                    span.classList.add("check");
                    span.classList.remove("error");
                    checkList["inputPhone"] = true;
                } else {
                    span.textContent = "유효하지 않은 비밀번호입니다.";
                    span.classList.add("error");
                    span.classList.remove("check");
                    checkList["inputPhone"] = false;
                }
            })
        </script>

    </body>
</html>